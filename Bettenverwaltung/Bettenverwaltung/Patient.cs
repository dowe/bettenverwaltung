//------------------------------------------------------------------------------
// <auto-generated>
//     Dieser Code wurde von einem Tool generiert.
//     Wenn der Code neu generiert wird, gehen alle Änderungen an dieser Datei verloren
// </auto-generated>
//------------------------------------------------------------------------------
namespace Bettenverwaltung
{
    using System;
    using System.Collections.Generic;
    using System.ComponentModel.DataAnnotations;
    using System.Linq;
    using System.Text;

    public class Patient                                     //Klasse zum speichern der Patientendaten. Alle Daten könne via getter-Methoden gelesen werden, jedoch nicht geändert werden.
    {
        [Key]
        public int patId
        {
            get;
            set;
        }

        public string lastname
        {
            get;
            set;
        }

        public string firstname
        {
            get;
            set;
        }

        public string birthday
        {
            get;
            set;
        }

        public bool isFemale
        {
            get;
            set;
        }

        public virtual History history
        {
            get;
            set;
        }

        public virtual int correctStation
        {
            get;
            set;
        }


        public virtual int GetPatientId()
        {
            return patId;
        }

        public virtual string GetFirstName()
        {
            return firstname;
        }

        public virtual string GetLastName()
        {
            return lastname;
        }

        public bool IsFemale()
        {
            return isFemale;
        }

        public DateTime GetBirthday()
        {
            return DateTime.Parse(birthday);
        }

        public virtual History GetHistory()
        {
            return this.history;
        }

        public virtual EStation GetCorrectStation()
        {
            return (EStation)correctStation;
        }

        public virtual int GetAge()
        {
            int age = DateTime.Now.Year - this.GetBirthday().Year;
            if(this.GetBirthday().Month > DateTime.Now.Month)
            {
                age--;
            }
            else if (this.GetBirthday().Month == DateTime.Now.Month)
            {
                if(this.GetBirthday().Day > DateTime.Now.Day)
                {
                    age--;
                }
            }
            return age;
        }

        public Patient()
        {

        }

        public Patient(string firstname, string lastname, DateTime birthday, bool isFemale, EStation correctStation)    //Konstruktor: Der Patient wird aus den Übergabewerten erstellt. Die ID wird aus dem Wert des letzten
        {
            //DB eintrags generiert. Es wird ebenfalls eine neue Historie für den Patienten anglegt.
            this.firstname = firstname;
            this.lastname = lastname;
            this.birthday = birthday.ToString();
            this.isFemale = isFemale;
            this.history = History.CreateNewHistory();
            this.correctStation = (int)correctStation;
        }
    }
}

